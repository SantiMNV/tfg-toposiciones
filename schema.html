{foreach name=categoria from=$categorias item=categoria}
{if $smarty.foreach.categoria.iteration%2==0}
<p>Es par</p>
{else}
<p>Es inpar</p>
{/if}
{$smarty.foreach.categoria.iteration}
<a href="{$categoria.url}" title="{$categoria.categoria}">{$categoria.categoria}</a>
{/foreach}


<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <ul>
    SELECT DATE_ADD(curdate(), INTERVAL 10 DAY)
    <h2>POR HACER</h2>
    <li>si no cabe parte derecha, meterlo debajo izquerda</li>
    <li>parte izquerda mas ancha cuando no hay derecha</li>
  </ul>
  <hr>
  <h1>LISTA BASES DE DATOS NECESARIAS TFG</h1>
  <ul>
    <h2>[0]</h2>
    <li></li>
    <li></li>
    <li></li>
  </ul>
  <ul>
    <h2>Oposicion [1]</h2>
    <li>Estado: Convocada | Abierta | Cerrada</li>
    <li>Categoria [2]</li>
    <li>Enlace oficial</li>
    <li>Comunidad</li>
    <li>Num. Plazas</li>
    <li>Fecha Creacion</li>
    <li>Fecha Inicio</li>
    <li>Fecha fin</li>
  </ul>
  <ul>
    <h2>Categoria Oposicion [2]</h2>
    <li>Nombre</li>
    <li>Material recomendado</li>
  </ul>
  <ul>
    <h2>Temas [3]</h2>
    <li>Categoria [2]</li>
    <li>Nombre</li>
    <li>Contenido</li>
    <li>Fecha Creacion</li>
  </ul>
  <ul>
    <h2>Usuario [4]</h2>
    <span>**Permitir usuarios anonimos</span>
    <li>Nombre</li>
    <li>Contrase√±a</li>
    <li>Fecha creacion</li>
    <li>Ult conexion</li>
    <li>Listado comunidades noticias</li>
  </ul>
  <ul>
    <h2>Foro[5]</h2>
    <li>Nombre Foro</li>
    <li>Fecha creacion</li>
  </ul>
  <ul>
    <h2>Pregunta [6]</h2>
    <li>Foro</li>
    <li>Usuario [4]</li>
    <li>Titulo</li>
    <li>Contenido</li>
    <li>Estado: Planteada: Atendida</li>
    <li>Fecha</li>
  </ul>
  <ul>
    <h2>Respuesta [7]</h2>
    <li>Pregunta [6]</li>
    <li>Usuario [4]</li>
    <li>Contenido</li>
    <li>Fecha</li>
  </ul>
</body>

</html>




<?php
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL);

const MAIN_DIRECTORY = "/srv/http/toposiciones";

const SMARTY_LIB = "../view/smarty_lib";
const SMARTY_DIRECTORY = "../view/smarty";
const MODEL_DIRECTORY = "../model";
const MEDIA_DIRECTORY = "view/media";
const CSS_DIRECTORY = "view/css";
const JS_DIRECTORY = "view/js";

echo ("<br>" . SMARTY_LIB . "<br>");
echo (CSS_DIRECTORY . "<br>");

require(SMARTY_LIB . '/libs/Smarty.class.php');
require(MODEL_DIRECTORY . "/include/Page.php");
require(MODEL_DIRECTORY . "/include/pdo_connection.php");

$smarty = new Smarty;

$smarty->template_dir = SMARTY_DIRECTORY . '/main/templates';
$smarty->compile_dir = SMARTY_DIRECTORY . '/main/templates_c/';
$smarty->config_dir = SMARTY_DIRECTORY . '/main/configs/';
$smarty->cache_dir = SMARTY_DIRECTORY . '/main/cache/';
$smarty->addTemplateDir(array(
  'layouts' => SMARTY_DIRECTORY . '/main/templates/layouts',
));

$smarty->assign('MEDIA_DIRECTORY', MEDIA_DIRECTORY);
$smarty->assign('CSS_DIRECTORY', CSS_DIRECTORY);
$smarty->assign('JS_DIRECTORY', JS_DIRECTORY);

require("urlify.php");
$smarty->registerPlugin('function', 'urlify', 'urlify');


$smarty->assign("oppositions", getOppositions()->fetchAll());

$crumbs = explode("/", $_SERVER["REQUEST_URI"]);
$breadCrumbs = array();
foreach ($crumbs as $crumb) {
  array_push($breadCrumbs, ucfirst(str_replace(array(".php", "_"), array("", " "), $crumb) . ' '));
}
array_shift($breadCrumbs);
$smarty->assign('breadCrumbs', $breadCrumbs);


function getOppositions() {
  global $conn;
  $sql = "SELECT opposition.opposition_status,opposition.seats,opposition_category.category_name,spain_states.provincia as state,opposition.updated_at FROM opposition,spain_states,opposition_category where opposition.stateId = spain_states.stateId and opposition.categoryId = opposition_category.categoryId order by opposition.updated_at desc limit 5";

  $resultado = $conn->query($sql);
  return $resultado;
}